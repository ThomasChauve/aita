

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>1. Load data from G50 analyser &mdash; AITAToolbox 2.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5. Function overview" href="../AITA/function.html" />
    <link rel="prev" title="Welcome to AITA Toolbox’s documentation!" href="../index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> AITAToolbox
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">1. Load data from G50 analyser</a></li>
<li class="toctree-l1"><a class="reference internal" href="#basic-treatment">2. Basic treatment</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#filter-the-data">2.1. Filter the data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#croping">2.2. Croping</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#colormap">3. Colormap</a></li>
<li class="toctree-l1"><a class="reference internal" href="#pole-figure">4. Pole figure</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#representation">4.1. Representation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pole-figure-all-sample">4.1.1. Pole figure all sample</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#kernel-density-estimation">4.2. Kernel Density Estimation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../AITA/function.html">5. Function overview</a></li>
</ul>
<p class="caption"><span class="caption-text">CLASS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../CLASS/image2d.html">1. image2d</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CLASS/setvector3d.html">2. setvector3d</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AITAToolbox</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li><span class="section-number">1. </span>Load data from G50 analyser</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/Documentation/Documentation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p>This documention is made from a jupyter notebook available in
‘Exemple/Documentation.ipynb’</p>
<p>It can be run interactively using binder :</p>
<a class="reference external image-reference" href="https://mybinder.org/v2/gh/ThomasChauve/aita/HEAD"><img alt="https://mybinder.org/badge_logo.svg" src="https://mybinder.org/badge_logo.svg" /></a>
<div class="section" id="load-data-from-g50-analyser">
<h1><span class="section-number">1. </span>Load data from G50 analyser<a class="headerlink" href="#load-data-from-g50-analyser" title="Permalink to this headline">¶</a></h1>
<p>Loading data from G50 analyser after you convert binary file into ASCII
file with 5 columuns. The ‘micro_test.bmp’ file should be a black and
white image with the grains boundaries in white.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">AITAToolbox.loadData_aita</span> <span class="k">as</span> <span class="nn">lda</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">data</span><span class="o">=</span><span class="n">lda</span><span class="o">.</span><span class="n">aita5col</span><span class="p">(</span><span class="s1">&#39;orientation_test.dat&#39;</span><span class="p">,</span><span class="s1">&#39;micro_test.bmp&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Sucessfull aita build !
</pre></div>
</div>
</div>
<div class="section" id="basic-treatment">
<h1><span class="section-number">2. </span>Basic treatment<a class="headerlink" href="#basic-treatment" title="Permalink to this headline">¶</a></h1>
<div class="section" id="filter-the-data">
<h2><span class="section-number">2.1. </span>Filter the data<a class="headerlink" href="#filter-the-data" title="Permalink to this headline">¶</a></h2>
<p>This function filter the bad indexed value. Using G50 analyser a quelity
factor is given between 0 and 100. Usualy using data with a quality
factor higher than 75 is a good option.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="mi">75</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="croping">
<h2><span class="section-number">2.2. </span>Croping<a class="headerlink" href="#croping" title="Permalink to this headline">¶</a></h2>
<p>Sometimes it can be usefull to select a sub area.</p>
<p><strong>Warning :</strong> This function need an interaction with a figure. Hence it
cannot ne used with jupyter notebook such as ‘%matplotlib inline’</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data</span><span class="o">.</span><span class="n">crop</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="colormap">
<h1><span class="section-number">3. </span>Colormap<a class="headerlink" href="#colormap" title="Permalink to this headline">¶</a></h1>
<p>Plotting the colormap with the grains boundaries</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">data</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">data</span><span class="o">.</span><span class="n">micro</span><span class="o">.</span><span class="n">plotBoundary</span><span class="p">(</span><span class="n">dilatation</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Colormap&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Text</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s1">&#39;Colormap&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/output_7_1.png" src="../_images/output_7_1.png" />
<p>The associated colorwheel :</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">lda</span><span class="o">.</span><span class="n">aita</span><span class="o">.</span><span class="n">lut</span><span class="p">())</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;LUT&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Text</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s1">&#39;LUT&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/output_9_1.png" src="../_images/output_9_1.png" />
</div>
<div class="section" id="pole-figure">
<h1><span class="section-number">4. </span>Pole figure<a class="headerlink" href="#pole-figure" title="Permalink to this headline">¶</a></h1>
<p>There is various option to plot the pole figure here we focus on some of
them but to see all of them refer to the documentation of plotpdf
function.</p>
<p>The color coding of the pole figure is obtain using a Kernel Density
Estimation (KDE). This KDE has to be manipulating carrefully. If you
want to have a basic idea of what is a KDE you can look at
<a class="reference external" href="https://mathisonian.github.io/kde/">https://mathisonian.github.io/kde/</a>.</p>
<div class="section" id="representation">
<h2><span class="section-number">4.1. </span>Representation<a class="headerlink" href="#representation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="pole-figure-all-sample">
<h3><span class="section-number">4.1.1. </span>Pole figure all sample<a class="headerlink" href="#pole-figure-all-sample" title="Permalink to this headline">¶</a></h3>
<p>Here some of the option are shown as contour plot, and with or without
circle for specific angle.</p>
<p>Be aware that to reduce the computation time we only used by default
10000 orientations selected randomly. You can modify this using ‘nbp’
value. If you set nbp to 0 it use all the data.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">),</span><span class="n">dpi</span><span class="o">=</span><span class="mi">160</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">plotpdf</span><span class="p">(</span><span class="n">contourf</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">angle</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">plotpdf</span><span class="p">(</span><span class="n">contourf</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">plotpdf</span><span class="p">(</span><span class="n">angle</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">plotpdf</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">array</span><span class="p">([</span><span class="mf">0.29090318</span><span class="p">,</span> <span class="mf">0.36842623</span><span class="p">,</span> <span class="mf">0.3406706</span> <span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">float32</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/output_11_1.png" src="../_images/output_11_1.png" />
</div>
</div>
<div class="section" id="kernel-density-estimation">
<h2><span class="section-number">4.2. </span>Kernel Density Estimation<a class="headerlink" href="#kernel-density-estimation" title="Permalink to this headline">¶</a></h2>
<p>If you want to have an idea of a basic KDE in one dimention refer to
<a class="reference external" href="https://mathisonian.github.io/kde/">https://mathisonian.github.io/kde/</a></p>
<p>Here there is some specificities du to the fact that we are computing
KDE on a sphere. To do so we are using sklearn.neighbors.KernelDensity
(<a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.neighbors.KernelDensity.html">https://scikit-learn.org/stable/modules/generated/sklearn.neighbors.KernelDensity.html</a>).</p>
<p>The ‘metric’ is set to ‘haversine’ for spherical computation (for
exemple see
<a class="reference external" href="https://scikit-learn.org/stable/auto_examples/neighbors/plot_species_kde.html#sphx-glr-auto-examples-neighbors-plot-species-kde-py">https://scikit-learn.org/stable/auto_examples/neighbors/plot_species_kde.html#sphx-glr-auto-examples-neighbors-plot-species-kde-py</a>)</p>
<p>We are using a gaussian kernel.</p>
<p><strong>Warning :</strong> The ‘bandwidth’ parameter is crutial parameter to set. It
can have a strong influence on your pole figure and you interpretation.
You should set it up carefully and be critic on your pole figure. Here
we show different pole figure for different bandwidth value using the
same data as input.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">),</span><span class="n">dpi</span><span class="o">=</span><span class="mi">160</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">plotpdf</span><span class="p">(</span><span class="n">contourf</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">angle</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">bw</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;bw=0.05&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">plotpdf</span><span class="p">(</span><span class="n">contourf</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">angle</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">bw</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;bw=0.1&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">plotpdf</span><span class="p">(</span><span class="n">contourf</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">angle</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">bw</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;bw=0.3&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">plotpdf</span><span class="p">(</span><span class="n">contourf</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">angle</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">bw</span><span class="o">=</span><span class="mf">2.0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;bw=2&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Text</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s1">&#39;bw=2&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/output_13_1.png" src="../_images/output_13_1.png" />
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../AITA/function.html" class="btn btn-neutral float-right" title="5. Function overview" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../index.html" class="btn btn-neutral float-left" title="Welcome to AITA Toolbox’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright CC-BY-CC.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>